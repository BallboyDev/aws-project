# Route 53
- Amazon Route 53은 AWS 에서 제공하는 관리형 DNS 서비스이다.

## 주요 기능
- 도메인 이름 등록
    - 도메인 이름을 사용하기 위해서는 전 세계에 위치한 네임 서버에 도메인 이름을 등록해야 하고 이 작업은 등록 대행소 관장한다. Route 53 역시 도메인 등록 대행소 역할을 수행한다.
    - 도메인 영역별 네임 서버를 관리하고 등록을 관장하는 단체에는 가장 상위에 ICANN 이라는 비영리 단체가 루트 네임 서버를 관리하고 TLD 네임 서버를 등록하는 역할을 수행한다.
    - 등록소라고 하는 기관이나 기업들이 TLD 네임 서버를 관리하고 권한 있는 네임 서버를 등록하는 역할을 수행한다.
    - Route 53의 도메인 등록대행소는 도메인 이름의 TLD에 해당하는 등록소로 도메인 등록 작업을 수행한다.

- 호스팅 영역 생성
    - Route 53으로 호스팅 영역을 생성하여 네임 서버를 관리할 수 있다. 이렇게 호스팅 영역을 생성해야 Route 53이 등록된 도메인 이름에 대한 권한 있는 네임 서비이자 SLD 네임 서버의 역할을 수행할 수 있다.
    - 호스팅 영역의 네임 서버들은 고가용성을 위해 다수의 서버로 구성한다.
    
- 레코드 작성
    - Route 53은 DNS 레코드를 정의하여 도메인에 대한 요청 처리 방법을 정의할 수 있는데, 이런 DNS 레코드는 다양한 형태의 라우팅 정책을 연결하여 도메인 요청에 대한 응답 방식을 정의할 수 있다.

## 라우팅 정책
- Route 53에는 DNS 요청에 어떻게 응답할지 정의하는 다양한 라우팅 정책이 있다.

### 단순 라우팅 정책
- 단순 라우팅 정책은 도메인에 대해 특정 대상을 지정하는 방식으로 여러 대상이 있으면 랜덤한 대상을 선택하고 응답한다.
- `example.com` 이라는 도메인의 A 레코드가 `10.1.1.1`과 `10.1.1.2`로 단순 라우팅 정책 레코드를 구성하면 DNS 요청에 대해 둘 중 하나의 IP 주소로 렌덤하게 응답한다.

~~~
// 단순 라우팅 정책

       [Route 53]
           ┃
     ┏━━━━━┻━━━━━━┓
     ┃            ┃ (랜덤 선택)
[10.1.1.1]   [10.1.1.2]
~~~

┃ ━ ┣ ┫ ┳ ┻ ╋ ┏ ┓ ┗ ┛

### 가중치 기반 라우팅 정책
- 가중치 기반 라우팅 정책은 대상의 가중치를 지정하여 비중에 따라 대상을 선택하고 응답한다.
- 가중치는 0~255 범위에서 설정하는데, 대상별 가중치 값을 합산한 전체 가중치를 대상별 가중치로 나누어 비중을 부여한다.

~~~
// 가중치 기반 라우팅 정책

         [Route 53]
             ┃
     ┏━━━━━━━┻━━━━━━┓
 100 ┃ (40%)    150 ┃ (60%)
[10.1.1.1]      [10.1.1.2]
~~~

### 지연 시간 기반 라우팅 정책
- 지연 시간 기반 라우팅 정책은 다수의 리전에 대상 자원이 있으면 사용자와 인접한 리전을 기준으로 대상 자원의 리전까지 지연 시간을 파악해서 낮은 지연 시간의 대상을 선택하고 응답한다.

~~~
// 지연 시간 기반 라우팅 정책

         [Route 53]
             ┃
      ┏━━━━━━━┻━━━━━━┓
100ms ┃              ┃ 300ms
[도쿄 리전]       [런던 리전]
[10.1.1.1]      [10.1.1.2]
~~~

### 장애 조치 라우팅 정책
- 장애 조치 라우팅 정책은 다수의 대상 자원에 대해 액티브와 패시브로 분류하고 대상 상태를 주기적으로 검사하여 액티브 대상을 선택하고 응답한다.
- 액티브 대상이 통신 불가능할 때는 패시브 대상을 액티브로 승격하여 대상 경로로 라우팅 한다.

### 그 밖의 라우팅 정책
- 지리적으로 인접한 리전에 위치한 대상으로 경로를 선택하는 `지리 위치 라우팅 정책`
- 지리 위치 라우팅과 형태가 동일하지만 영향도를 조정하는 바이어스라는 값을 사용하여 제어하는 `지리 근접 라우팅 정책`
- DNS 요청에 대해 다수의 값을 반환할 수 있는 `다중 값 응답 라우팅 정책`
- 그 밖에 Route 53은 다양한 라우팅 정책을 제공한다.



