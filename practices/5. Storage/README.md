# Storage

## Storage 유형
### 블록 스토리지 (Amazon EBS)
- 데이터를 Block 이라는 일정한 크기의 조각으로 나누어 저장하는 방식. 각 블록에는 고유한 주소가 부여되지만, 그 블록 안에 어떤 데이터가 있는지 스토리지는 알지 못한다.
- OS가 이 블록들을 제어하며, 파일 시스템을 생성하고 관리한다.

- 특징
    - 고성능, 낮은 지연시간으로 데이터에 접근하는 속도가 매우 빠르다.
    - OS가 직접 제어하므로 유연성이 높다.
    - 하나의 볼륨은 일반적으로 하나의 서버(EC2 인스턴스)에만 연결하여 사용한다.

- 사용 사례
    - 데이터 베이스
    - 가상 머신의 하드 드라이브
    - 고성능 컴퓨팅


### 파일 스토리지 (Amazon EFS)
- 파일 형태로 데이터가 저장이 되고, 이 파일들은 디렉토리 계층 구조 안에서 관리 된다.
- 스토리지 자체가 파일 시스템을 관리하며, 여러 사용자나 서버가 네트워크를 통해 이 파일 시스템에 동시에 접근하여 파일을 공유할 수 있다.

- 특징
    - 계층적 구조로 디렉토리와 파일 형태로 데이터를 쉽게 정리하고 탐색할 수 있다.
    - 여러 서버가 동시에 같은 파일에 접근하고 수정하기 용이하다.
    - 직관적이고 친숙한 사용 방식

- 사용 사례
    - 공용 파일 서버
    - 웹 서버의 콘텐츠 저장소
    - 개발 환경의 코드 저장소

### 객체 스토리지 (Amazon S3)
- 데이터를 객체라는 단위로 저장하며, 각 객체는 데이터 자체(파일), 풍부한 메타데이터(데이터에 대한 설명), 그리고 전역적으로 고유한 ID(Key)로 구성된다.
- 파일 스토리지 처럼 계층 구조가 없는 평평한 주소 공간에 모든 객체를 저장하여, HTTP/HTTPS 같은 웹 프로토콜을 통해 고유 ID로 직접 접근한다.

- 특징
    - 사실상 용량 제한이 없는 무한한 확장이 가능하다.
    - 데이터의 내용, 생성일, 접근 권한 등 다양한 정보를 메타 데이터로 저장하고 활용할 수 있다.
    - 데이터가 여러 장비와 시설에 자동으로 복제되어 저장되므로 매우 안전하다.
    - 파일의 일부만 수정하는 것이 불가능하고, 수정된 내용으로 객체 전체를 새로 덮어 써야 한다.

- 사용 사례
    - 백업 및 아카이빙
    - 빅데이터 분석 및 데이터 레이크
    - 이미지, 동영상 등 정적 콘텐츠 호스팅 및 배포
    - 클라우드 네이티브 애플리케이션의 데이터 저장소


## EBS
- Amazon EBS는 EC2 인스턴스에 사용할 수 있는 블록 스토리지 볼륨을 제공하는 서비스이다. 블록 스토리지 특성을 이용한 저장 방식이므로 데이터를 일정한 크기의 블록으로 나누어 분산 저장하는데, 볼륨 위에 파일 시스템을 생성하거나 HDD같은 블록 디바이스를 사용하는 것처럼 볼륨을 쓸 수 있다.
- EBS는 고속 네트워크로 연결되어 있고 인스턴스와 EBS 볼륨은 서로 종속 관계에 있지 않으며, 인스턴스는 다수의 볼륨을 연결하여 사용할 수 있다. 하지만 EBS 볼륨은 한 번에 하나의 인스턴스에만 연결 할 수 있고, 해당 인스턴스에서 지원하는 형태의 시스템으로 포맷해야만 사용할 수 있다.

### EBS 특징 
- 가용성
    - 단인 하드웨어 구성 요소의 장애로 인해 데이터가 손실 되지 않도록 해당 가용 영역 내에서 자동으로 데이터를 복제한다.
- 지속성
    - EBS 볼륨은 인스턴스 수명과 관계 없이 유지되는 비관게형 인스턴스 스토리지 이다.
- 안정성
    - Amazon EBS 암호화 기능으로 암호화된 EBS 볼륨을 생성할 수 있으며, 암호화 표준 알고리즘(AES-256)을 사용한다.
- 백업
    - 모든 EBS 볼륨의 스냅샷(백업)을 생성하고, 다중 가용 영역에 중복 저장이 가능한 Amazon S3에 볼륨 내 데이터 사뵨을 백업할 수 있다.
- 확장성
    - 서비스를 중단할 필요 없이 볼륨 유형, 볼륨 크기, IOPS(Input/Output operations per Second) 용량을 수정할 수 있다.

## EFS
- Amazon EFS는 클라우드 환경과 온프레미스 환경에서 사용할 수 있는 클라우드에서 하드웨어 프로비저닝 유지 관리, 소프트웨어 구성, 모니터링, 복잡한 성능 조절 등 모든관리하는 완전 관리형 네트워크 파일 시스템이다. 
- 처음 파일 시스템을 생성한 후 서버에 연결하면 사용한 만큼 자동으로 스토리지 크기가 확장되고, 사용한 만큼만 비용을 지불하면 되기 때문에 사실상 용량 제한 없이 사용할 수 있다.

### EFS 특징
- EFS는 고성능 네트워크 파일 시스템으로, 여러 대의 컴퓨터가 네트워크 상의 동일한 데이터에 접근 해야 할 때 사용한다. NFS 표준 프로토콜 기반의 연결을 지원하고 있어 기존 다양한 애플리케이션과 유연하게 통합할 수 있고, 여러 컴퓨팅 인스턴스에서 동시에 사용할 수 있다. 또한 기존 NAS 처럼 사용자 홈 디렉터리를 공유하여 애플리케이션을 개발하고, 테스트 환경의 다양한 웹 서비스와 콘텐츠 관리, 분석이나 미디어 업무에도 활용할 수 있다.
- EFS 볼륨은 IOPS가 높고 용량이 매우 크기 때문에 처리량이 많고 대기 시간이 짧다. 또한 파일 시스템의 사용 증가에 따라 자동으로 용량 및 성능이 조정되는 탄력성을 제공하여 네트워크 스토리지의 용량 및 성능 부족을 걱정할 필요가 없다. EFS는 EBS 처럼 가용 영역 단위의 서비스가 아니라 가용 영역 전반에 걸쳐 사용할 수 있는 스토리지이므로, 가용 영역 장애를 고려한 디자인이 가능해서 전통적인 NAS 보다 뛰어난 가용성을 가진다.

## S3
- Amazon S3는 저장되는 데이터를 객체라고 하며, 이 객체 저장소를 버킷이라고 한다. 그리고 객체에 대한 입출력은 HTTP 프로토콜로 진행되며, REST API를 이용하여 명령이 전달된다.
- S3는 높은 내구성 디자인으로 되어 있어 데이터의 손실을 최소화하도록 구성되어 있다.
- S3는 보안 규정 준수 및 감시 기능을 제공하여 있어 데이터가 안전하게 저장되고 인증된 사용자만 접근할 수 있도록 구성한다. 필요한 경우 접근 권한 정책을 이용하여 해당 객체의 접근을 제어할 수 있다.

### S3 구성 요소
- 버킷
    - 데이터 스토리지를 위한 S3의 기본 컨테이너로, 객체는 반드시 버킷에 저장되어야 하며, 하나의 리전에서 생성된 후에는 버킷 이름과 리전을 변경할 수 없다.
- 객체
    - S3에 저장되는 기본 매체로, 객체 데이터와 객체 메타 데이터로 구성되어 있다. 메타 데이터는 객체를 설명하는 이름 - 값에 대한 하나의 쌍으로 존재한다. 객체를 저장할 때 사용자 정의 메타 데이터를 지정할 수 있으며, 객체는 키 및 버전 ID를 이용하여 버킷 내에서 고유하게 식별된다.
- 키
    - 버킷 내에서 객체의 고유한 식별자이다. 버킷 내 모든 객체는 고유한 하나의 키를 갖게 된다.
- S3 데이터 일관성
    - S3 버킷에 있는 객체에 대해 여러 서버로 데이터를 복제하여 고가용성 및 내구성을 구현하고 데이터 일관성 모델을 제공한다.

### S3 특징
- 객체 스토리지 모델
    - 데이터는 객체 단위로 저장되며, 각 객체는 파일 데이터, 메타 데이터, 고유 키로 구성된다.
    - 이 객체들은 버킷이라는 최상위 컨테이너에 저장되며, 버킷 이름은 전 세계에서 유일 해야 한다.

- 압도적인 내구성 및 가용성
    - 내구성
        - S3는 99.999999999% (일레븐 나인) 데이터 내구성을 제공한다.
    - 가용성
        - 스토리지 클래스에 따라 99.99% ~ 99.9%의 높은 가용성을 제공하여 데이터 접근이 안정적이다.

- 무한한 확장성
    - S3는 저장 되는 데이터 만큼 자동으로 확장되며, 저장할 수 있는 데이터의 총량과 객체 수에는 제한이 없다.

- 보안 및 접근 제어
    - 암호화
        - 저장된 데이터를 서버 측 도는 클라이언트 측에서 암호화하여 안전하게 보호할 수 있다.
    - 접근 제어
        - IAM 정책, 버킷 정책, 접근 제어 목록(ACL) 등을 조합하여 버킷이나 특정 객체에 대한 접근 권한을 매우 세밀하게 제어 가능하다.

- 데이터 수명 주기 관리
    - 규칙을 설정하여 객체를 자동으로 다른 스토리지 클래스로 이동시키거나 삭제할 수 있다.

- 버전 관리
    - 버킷에 버전 관리 기능을 활성화하면, 객체가 덮어쓰이거나 삭제되더라도 이전 버전들이 모두 보관된다. 
